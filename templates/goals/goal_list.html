{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- Start of Container -->
<div class="container py-4">

{% for goal in object_list %}
<!-- Start of Bootstrap Card for title: "{{ goal.title }}" -->
<div class="card mb-4 shadow-sm bg-light rounded">
	<div class="card-body">
		
		<!-- Header row -->
		<div class="d-flex justify-content-between align-items-start">
			<div>
				<!-- Title --> 
				<h5 class="card-title fw-bold mb-1 
					{% if goal.is_completed %}text-muted text-decoration-line-through
					{% else %}text-success{% endif %}">
					{{ goal.title }}
				</h5>
				<!-- Due date -->
				<p class="text-muted small mb-2">
					Due: {{ goal.due_date|date:"F j, Y" }}
				</p>
			</div>

			<!-- Completion Checkbox Toggle Form -->
			<form action="{% url 'goals:goal_complete' goal.pk %}" method="post"
				class="text-end d-inline">
				{% csrf_token %}
				<!-- JS uses completion-checkbox class -->
				<input type="checkbox"
       					class="large-checkbox completion-checkbox"
					       {% if goal.is_completed %}checked{% endif %}>			
			</form>
		</div>

		<!-- Description toggle -->
		<!-- JS uses toggle-description class -->
		<button class="btn btn-link btn-sm p-0 text-primary-emphasis toggle-description" data-goal-id="{{ goal.id }}">
			See description
		</button>

		<!-- Hidden description -->
		<div class="collapse mt-2 description-text" id="description-{{ goal.id }}">
			<p class="mb-0">{{ goal.description }}</p>
		</div>

		<!-- Actions -->
		<div class="d-flex justify-content-between align-items-center mt-3">
			<div class="btn-group gap-2">
				<a href="{% url 'goals:goal_update' goal.pk %}" class="btn btn-sm btn-outline-primary">
					<i class="bi bi-pencil"></i> Edit
				</a>
				<button class="btn btn-sm btn-outline-secondary" disabled>
					<i class="bi bi-archive"></i> Archive
				</button>
			</div>
			<button class="btn btn-sm btn-outline-warning" disabled title="Send reminder">
				<i class="bi bi-bell"></i>
			</button>
		</div>
	</div>
</div>
<!-- End of Bootstrap Card for title: "{{ goal.title }}" -->
{% endfor %}

</div>
<!-- End of Container -->
{% endblock %}

{% block script %}
<script src="{% static 'js/goals.js' %}"></script>
{% endblock %}

